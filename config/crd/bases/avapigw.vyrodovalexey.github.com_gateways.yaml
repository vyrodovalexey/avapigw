---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.17.0
  name: gateways.avapigw.vyrodovalexey.github.com
spec:
  group: avapigw.vyrodovalexey.github.com
  names:
    kind: Gateway
    listKind: GatewayList
    plural: gateways
    shortNames:
    - gw
    singular: gateway
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - jsonPath: .status.phase
      name: Phase
      type: string
    - jsonPath: .status.listenersCount
      name: Listeners
      type: integer
    - jsonPath: .status.addresses[*].value
      name: Addresses
      type: string
    - jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    name: v1alpha1
    schema:
      openAPIV3Schema:
        description: |-
          Gateway is the Schema for the gateways API.
          Gateway represents an instance of a service-traffic handling infrastructure
          by binding Listeners to a set of IP addresses.
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: GatewaySpec defines the desired state of Gateway
            properties:
              addresses:
                description: |-
                  Addresses requested for this Gateway. This is optional and behavior can
                  depend on the implementation.
                items:
                  description: GatewayAddress describes an address that can be bound
                    to a Gateway
                  properties:
                    type:
                      allOf:
                      - enum:
                        - IPAddress
                        - Hostname
                        - NamedAddress
                      - enum:
                        - IPAddress
                        - Hostname
                        - NamedAddress
                      default: IPAddress
                      description: Type of the address
                      type: string
                    value:
                      description: Value of the address. The validity of the values
                        will depend on the type.
                      maxLength: 253
                      minLength: 1
                      type: string
                  required:
                  - value
                  type: object
                maxItems: 16
                type: array
              infrastructure:
                description: Infrastructure defines infrastructure level attributes
                  about this Gateway instance
                properties:
                  annotations:
                    additionalProperties:
                      type: string
                    description: Annotations that SHOULD be applied to any resources
                      created in response to this Gateway
                    maxProperties: 8
                    type: object
                  labels:
                    additionalProperties:
                      type: string
                    description: Labels that SHOULD be applied to any resources created
                      in response to this Gateway
                    maxProperties: 8
                    type: object
                  parametersRef:
                    description: |-
                      ParametersRef is a reference to a resource that contains the configuration
                      parameters corresponding to the Gateway
                    properties:
                      name:
                        description: Name is the name of the referent
                        maxLength: 253
                        minLength: 1
                        type: string
                    required:
                    - name
                    type: object
                type: object
              listeners:
                description: |-
                  Listeners associated with this Gateway. Listeners define logical endpoints
                  that are bound on this Gateway's addresses.
                items:
                  description: |-
                    Listener embodies the concept of a logical endpoint where a Gateway accepts
                    network connections.
                  properties:
                    allowedRoutes:
                      description: |-
                        AllowedRoutes defines the types of routes that MAY be attached to a
                        Listener and the trusted namespaces where those Route resources MAY be present.
                      properties:
                        kinds:
                          description: |-
                            Kinds specifies the groups and kinds of Routes that are allowed to bind
                            to this Gateway Listener.
                          items:
                            description: RouteGroupKind indicates the group and kind
                              of a Route resource
                            properties:
                              group:
                                default: avapigw.vyrodovalexey.github.com
                                description: Group is the group of the Route
                                maxLength: 253
                                type: string
                              kind:
                                description: Kind is the kind of the Route
                                maxLength: 63
                                minLength: 1
                                type: string
                            required:
                            - kind
                            type: object
                          maxItems: 8
                          type: array
                        namespaces:
                          description: |-
                            Namespaces indicates namespaces from which Routes may be attached to this
                            Listener.
                          properties:
                            from:
                              allOf:
                              - enum:
                                - All
                                - Selector
                                - Same
                              - enum:
                                - All
                                - Selector
                                - Same
                              default: Same
                              description: From indicates where Routes will be selected
                                for this Gateway.
                              type: string
                            selector:
                              description: |-
                                Selector must be specified when From is set to "Selector". In that case,
                                only Routes in Namespaces matching this Selector will be selected by this Gateway.
                              properties:
                                matchExpressions:
                                  description: matchExpressions is a list of label
                                    selector requirements. The requirements are ANDed.
                                  items:
                                    description: |-
                                      A label selector requirement is a selector that contains values, a key, and an operator that
                                      relates the key and values.
                                    properties:
                                      key:
                                        description: key is the label key that the
                                          selector applies to.
                                        type: string
                                      operator:
                                        description: |-
                                          operator represents a key's relationship to a set of values.
                                          Valid operators are In, NotIn, Exists and DoesNotExist.
                                        type: string
                                      values:
                                        description: |-
                                          values is an array of string values. If the operator is In or NotIn,
                                          the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                          the values array must be empty. This array is replaced during a strategic
                                          merge patch.
                                        items:
                                          type: string
                                        type: array
                                    required:
                                    - key
                                    - operator
                                    type: object
                                  type: array
                                matchLabels:
                                  additionalProperties:
                                    type: string
                                  description: |-
                                    matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                                    map is equivalent to an element of matchExpressions, whose key field is "key", the
                                    operator is "In", and the values array contains only "value". The requirements are ANDed.
                                  type: object
                              type: object
                              x-kubernetes-map-type: atomic
                          type: object
                      type: object
                    hostname:
                      description: |-
                        Hostname specifies the virtual hostname to match for protocol types that
                        define this concept. When unspecified, all hostnames are matched.
                      maxLength: 253
                      minLength: 1
                      pattern: ^(\*\.)?[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                      type: string
                    name:
                      description: Name is the name of the Listener. This name MUST
                        be unique within a Gateway.
                      maxLength: 253
                      minLength: 1
                      pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                      type: string
                    port:
                      description: |-
                        Port is the network port. Multiple listeners may use the same port,
                        subject to the Listener compatibility rules.
                      format: int32
                      maximum: 65535
                      minimum: 1
                      type: integer
                    protocol:
                      allOf:
                      - enum:
                        - HTTP
                        - HTTPS
                        - GRPC
                        - GRPCS
                        - TCP
                        - TLS
                        - UDP
                      - enum:
                        - HTTP
                        - HTTPS
                        - GRPC
                        - GRPCS
                        - TCP
                        - TLS
                        - UDP
                      description: Protocol specifies the network protocol this listener
                        expects to receive.
                      type: string
                    tls:
                      description: |-
                        TLS is the TLS configuration for the Listener. This field is required if
                        the Protocol field is "HTTPS", "GRPCS", or "TLS".
                      properties:
                        certificateRefs:
                          description: |-
                            CertificateRefs contains a series of references to Kubernetes objects that
                            contain TLS certificates and private keys.
                          items:
                            description: SecretObjectReference identifies a Secret
                              object within a namespace
                            properties:
                              name:
                                description: Name is the name of the secret
                                maxLength: 253
                                minLength: 1
                                type: string
                              namespace:
                                description: |-
                                  Namespace is the namespace of the secret
                                  If not specified, the namespace of the referrer is used
                                maxLength: 63
                                minLength: 1
                                type: string
                            required:
                            - name
                            type: object
                          maxItems: 64
                          type: array
                        mode:
                          allOf:
                          - enum:
                            - Terminate
                            - Passthrough
                          - enum:
                            - Terminate
                            - Passthrough
                          default: Terminate
                          description: Mode defines the TLS behavior for the TLS session
                            initiated by the client.
                          type: string
                        options:
                          additionalProperties:
                            type: string
                          description: Options are a list of key/value pairs to enable
                            extended TLS configuration
                          maxProperties: 16
                          type: object
                      type: object
                  required:
                  - name
                  - port
                  - protocol
                  type: object
                maxItems: 64
                minItems: 1
                type: array
                x-kubernetes-list-map-keys:
                - name
                x-kubernetes-list-type: map
              selector:
                description: Selector specifies a set of pod labels used to select
                  the gateway pods
                properties:
                  matchExpressions:
                    description: matchExpressions is a list of label selector requirements.
                      The requirements are ANDed.
                    items:
                      description: |-
                        A label selector requirement is a selector that contains values, a key, and an operator that
                        relates the key and values.
                      properties:
                        key:
                          description: key is the label key that the selector applies
                            to.
                          type: string
                        operator:
                          description: |-
                            operator represents a key's relationship to a set of values.
                            Valid operators are In, NotIn, Exists and DoesNotExist.
                          type: string
                        values:
                          description: |-
                            values is an array of string values. If the operator is In or NotIn,
                            the values array must be non-empty. If the operator is Exists or DoesNotExist,
                            the values array must be empty. This array is replaced during a strategic
                            merge patch.
                          items:
                            type: string
                          type: array
                      required:
                      - key
                      - operator
                      type: object
                    type: array
                  matchLabels:
                    additionalProperties:
                      type: string
                    description: |-
                      matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                      map is equivalent to an element of matchExpressions, whose key field is "key", the
                      operator is "In", and the values array contains only "value". The requirements are ANDed.
                    type: object
                type: object
                x-kubernetes-map-type: atomic
            required:
            - listeners
            type: object
          status:
            description: GatewayStatus defines the observed state of Gateway
            properties:
              addresses:
                description: Addresses lists the network addresses that have been
                  bound to the Gateway
                items:
                  description: GatewayStatusAddress describes a network address that
                    is bound to a Gateway
                  properties:
                    type:
                      allOf:
                      - enum:
                        - IPAddress
                        - Hostname
                        - NamedAddress
                      - enum:
                        - IPAddress
                        - Hostname
                        - NamedAddress
                      default: IPAddress
                      description: Type of the address
                      type: string
                    value:
                      description: Value of the address
                      maxLength: 253
                      minLength: 1
                      type: string
                  required:
                  - value
                  type: object
                maxItems: 16
                type: array
              conditions:
                description: Conditions represent the latest available observations
                  of an object's state
                items:
                  description: Condition represents a condition of a resource
                  properties:
                    lastTransitionTime:
                      description: LastTransitionTime is the last time the condition
                        transitioned from one status to another
                      format: date-time
                      type: string
                    message:
                      description: Message is a human-readable message indicating
                        details about the transition
                      maxLength: 32768
                      type: string
                    observedGeneration:
                      description: ObservedGeneration represents the .metadata.generation
                        that the condition was set based upon
                      format: int64
                      minimum: 0
                      type: integer
                    reason:
                      description: Reason is a brief reason for the condition's last
                        transition
                      maxLength: 1024
                      minLength: 1
                      type: string
                    status:
                      description: Status of the condition, one of True, False, Unknown
                      enum:
                      - "True"
                      - "False"
                      - Unknown
                      type: string
                    type:
                      description: Type of condition
                      type: string
                  required:
                  - lastTransitionTime
                  - reason
                  - status
                  - type
                  type: object
                maxItems: 8
                type: array
                x-kubernetes-list-map-keys:
                - type
                x-kubernetes-list-type: map
              lastReconciledTime:
                description: LastReconciledTime is the last time the resource was
                  reconciled
                format: date-time
                type: string
              listeners:
                description: Listeners provides status for each unique listener port
                  defined in the Spec
                items:
                  description: ListenerStatus is the status associated with a Listener
                  properties:
                    attachedRoutes:
                      description: |-
                        AttachedRoutes represents the total number of Routes that have been
                        successfully attached to this Listener
                      format: int32
                      type: integer
                    conditions:
                      description: Conditions describe the current condition of this
                        listener
                      items:
                        description: Condition represents a condition of a resource
                        properties:
                          lastTransitionTime:
                            description: LastTransitionTime is the last time the condition
                              transitioned from one status to another
                            format: date-time
                            type: string
                          message:
                            description: Message is a human-readable message indicating
                              details about the transition
                            maxLength: 32768
                            type: string
                          observedGeneration:
                            description: ObservedGeneration represents the .metadata.generation
                              that the condition was set based upon
                            format: int64
                            minimum: 0
                            type: integer
                          reason:
                            description: Reason is a brief reason for the condition's
                              last transition
                            maxLength: 1024
                            minLength: 1
                            type: string
                          status:
                            description: Status of the condition, one of True, False,
                              Unknown
                            enum:
                            - "True"
                            - "False"
                            - Unknown
                            type: string
                          type:
                            description: Type of condition
                            type: string
                        required:
                        - lastTransitionTime
                        - reason
                        - status
                        - type
                        type: object
                      maxItems: 8
                      type: array
                      x-kubernetes-list-map-keys:
                      - type
                      x-kubernetes-list-type: map
                    name:
                      description: Name is the name of the Listener that this status
                        corresponds to
                      maxLength: 253
                      minLength: 1
                      type: string
                    supportedKinds:
                      description: SupportedKinds is the list of route kinds that
                        MAY be attached to a listener
                      items:
                        description: RouteGroupKind indicates the group and kind of
                          a Route resource
                        properties:
                          group:
                            default: avapigw.vyrodovalexey.github.com
                            description: Group is the group of the Route
                            maxLength: 253
                            type: string
                          kind:
                            description: Kind is the kind of the Route
                            maxLength: 63
                            minLength: 1
                            type: string
                        required:
                        - kind
                        type: object
                      maxItems: 8
                      type: array
                  required:
                  - attachedRoutes
                  - name
                  type: object
                maxItems: 64
                type: array
                x-kubernetes-list-map-keys:
                - name
                x-kubernetes-list-type: map
              listenersCount:
                description: ListenersCount is the number of listeners configured
                format: int32
                type: integer
              observedGeneration:
                description: ObservedGeneration reflects the generation of the most
                  recently observed resource
                format: int64
                type: integer
              phase:
                description: Phase represents the current phase of the resource
                enum:
                - Pending
                - Ready
                - Error
                - Reconciling
                - Degraded
                type: string
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
