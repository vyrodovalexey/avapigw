---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.17.0
  name: grpcroutes.avapigw.vyrodovalexey.github.com
spec:
  group: avapigw.vyrodovalexey.github.com
  names:
    kind: GRPCRoute
    listKind: GRPCRouteList
    plural: grpcroutes
    shortNames:
    - grpcr
    singular: grpcroute
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - jsonPath: .spec.hostnames[*]
      name: Hostnames
      type: string
    - jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    name: v1alpha1
    schema:
      openAPIV3Schema:
        description: |-
          GRPCRoute is the Schema for the grpcroutes API.
          GRPCRoute provides a way to route gRPC requests.
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: GRPCRouteSpec defines the desired state of GRPCRoute
            properties:
              hostnames:
                description: |-
                  Hostnames defines a set of hostnames that should match against the GRPC
                  authority header to select a GRPCRoute used to process the request.
                items:
                  description: Hostname is a DNS hostname
                  maxLength: 253
                  minLength: 1
                  pattern: ^(\*\.)?[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                  type: string
                maxItems: 16
                type: array
              parentRefs:
                description: |-
                  ParentRefs references the resources (usually Gateways) that a Route wants
                  to be attached to.
                items:
                  description: ParentRef identifies a parent resource for route binding
                  properties:
                    group:
                      default: avapigw.vyrodovalexey.github.com
                      description: |-
                        Group is the group of the parent resource
                        Defaults to "avapigw.vyrodovalexey.github.com"
                      maxLength: 253
                      type: string
                    kind:
                      default: Gateway
                      description: |-
                        Kind is the kind of the parent resource
                        Defaults to "Gateway"
                      maxLength: 63
                      minLength: 1
                      type: string
                    name:
                      description: Name is the name of the parent resource
                      maxLength: 253
                      minLength: 1
                      type: string
                    namespace:
                      description: |-
                        Namespace is the namespace of the parent resource
                        When unspecified, the local namespace is inferred
                      maxLength: 63
                      minLength: 1
                      type: string
                    port:
                      description: Port is the network port this Route targets
                      format: int32
                      maximum: 65535
                      minimum: 1
                      type: integer
                    sectionName:
                      description: |-
                        SectionName is the name of a section within the parent resource
                        This is typically the listener name for Gateway
                      maxLength: 253
                      minLength: 1
                      type: string
                  required:
                  - name
                  type: object
                maxItems: 32
                type: array
              rules:
                description: Rules are a list of GRPC matchers, filters and actions.
                items:
                  description: |-
                    GRPCRouteRule defines semantics for matching a gRPC request based on
                    conditions (matches), processing it (filters), and forwarding the request
                    to an API object (backendRefs).
                  properties:
                    backendRefs:
                      description: BackendRefs defines the backend(s) where matching
                        requests should be sent.
                      items:
                        description: GRPCBackendRef defines how a GRPCRoute forwards
                          a gRPC request.
                        properties:
                          filters:
                            description: |-
                              Filters defined at this level should be executed if and only if the
                              request is being forwarded to the backend defined here.
                            items:
                              description: |-
                                GRPCRouteFilter defines processing steps that must be completed during the
                                request or response lifecycle.
                              properties:
                                extensionRef:
                                  description: |-
                                    ExtensionRef is an optional, implementation-specific extension to the
                                    "filter" behavior.
                                  properties:
                                    name:
                                      description: Name is the name of the referent
                                      maxLength: 253
                                      minLength: 1
                                      type: string
                                  required:
                                  - name
                                  type: object
                                requestHeaderModifier:
                                  description: RequestHeaderModifier defines a schema
                                    for a filter that modifies request headers.
                                  properties:
                                    add:
                                      description: Add adds the given header(s) (name,
                                        value) to the request/response
                                      items:
                                        description: HTTPHeader represents an HTTP
                                          header name and value
                                        properties:
                                          name:
                                            description: Name is the name of the HTTP
                                              header
                                            maxLength: 256
                                            minLength: 1
                                            pattern: ^[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                                            type: string
                                          value:
                                            description: Value is the value of the
                                              HTTP header
                                            maxLength: 4096
                                            type: string
                                        required:
                                        - name
                                        - value
                                        type: object
                                      maxItems: 16
                                      type: array
                                      x-kubernetes-list-map-keys:
                                      - name
                                      x-kubernetes-list-type: map
                                    remove:
                                      description: Remove removes the given header(s)
                                        from the request/response
                                      items:
                                        type: string
                                      maxItems: 16
                                      type: array
                                    set:
                                      description: Set overwrites the request/response
                                        with the given header (name, value)
                                      items:
                                        description: HTTPHeader represents an HTTP
                                          header name and value
                                        properties:
                                          name:
                                            description: Name is the name of the HTTP
                                              header
                                            maxLength: 256
                                            minLength: 1
                                            pattern: ^[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                                            type: string
                                          value:
                                            description: Value is the value of the
                                              HTTP header
                                            maxLength: 4096
                                            type: string
                                        required:
                                        - name
                                        - value
                                        type: object
                                      maxItems: 16
                                      type: array
                                      x-kubernetes-list-map-keys:
                                      - name
                                      x-kubernetes-list-type: map
                                  type: object
                                requestMirror:
                                  description: RequestMirror defines a schema for
                                    a filter that mirrors requests.
                                  properties:
                                    backendRef:
                                      description: BackendRef references a resource
                                        where mirrored requests are sent.
                                      properties:
                                        group:
                                          default: ""
                                          description: |-
                                            Group is the group of the backend resource
                                            Empty string means the core API group
                                          maxLength: 253
                                          type: string
                                        kind:
                                          default: Service
                                          description: |-
                                            Kind is the kind of the backend resource
                                            Defaults to "Service"
                                          maxLength: 63
                                          minLength: 1
                                          type: string
                                        name:
                                          description: Name is the name of the backend
                                            resource
                                          maxLength: 253
                                          minLength: 1
                                          type: string
                                        namespace:
                                          description: |-
                                            Namespace is the namespace of the backend resource
                                            When unspecified, the local namespace is inferred
                                          maxLength: 63
                                          minLength: 1
                                          type: string
                                        port:
                                          description: Port is the port of the backend
                                            service
                                          format: int32
                                          maximum: 65535
                                          minimum: 1
                                          type: integer
                                        weight:
                                          default: 1
                                          description: |-
                                            Weight specifies the proportion of traffic to forward to this backend
                                            Defaults to 1
                                          format: int32
                                          maximum: 1000000
                                          minimum: 0
                                          type: integer
                                      required:
                                      - name
                                      type: object
                                    percent:
                                      default: 100
                                      description: Percent of requests to mirror.
                                        Defaults to 100.
                                      format: int32
                                      maximum: 100
                                      minimum: 0
                                      type: integer
                                  required:
                                  - backendRef
                                  type: object
                                responseHeaderModifier:
                                  description: ResponseHeaderModifier defines a schema
                                    for a filter that modifies response headers.
                                  properties:
                                    add:
                                      description: Add adds the given header(s) (name,
                                        value) to the request/response
                                      items:
                                        description: HTTPHeader represents an HTTP
                                          header name and value
                                        properties:
                                          name:
                                            description: Name is the name of the HTTP
                                              header
                                            maxLength: 256
                                            minLength: 1
                                            pattern: ^[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                                            type: string
                                          value:
                                            description: Value is the value of the
                                              HTTP header
                                            maxLength: 4096
                                            type: string
                                        required:
                                        - name
                                        - value
                                        type: object
                                      maxItems: 16
                                      type: array
                                      x-kubernetes-list-map-keys:
                                      - name
                                      x-kubernetes-list-type: map
                                    remove:
                                      description: Remove removes the given header(s)
                                        from the request/response
                                      items:
                                        type: string
                                      maxItems: 16
                                      type: array
                                    set:
                                      description: Set overwrites the request/response
                                        with the given header (name, value)
                                      items:
                                        description: HTTPHeader represents an HTTP
                                          header name and value
                                        properties:
                                          name:
                                            description: Name is the name of the HTTP
                                              header
                                            maxLength: 256
                                            minLength: 1
                                            pattern: ^[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                                            type: string
                                          value:
                                            description: Value is the value of the
                                              HTTP header
                                            maxLength: 4096
                                            type: string
                                        required:
                                        - name
                                        - value
                                        type: object
                                      maxItems: 16
                                      type: array
                                      x-kubernetes-list-map-keys:
                                      - name
                                      x-kubernetes-list-type: map
                                  type: object
                                type:
                                  allOf:
                                  - enum:
                                    - RequestHeaderModifier
                                    - ResponseHeaderModifier
                                    - RequestMirror
                                    - ExtensionRef
                                  - enum:
                                    - RequestHeaderModifier
                                    - ResponseHeaderModifier
                                    - RequestMirror
                                    - ExtensionRef
                                  description: Type identifies the type of filter
                                    to apply.
                                  type: string
                              required:
                              - type
                              type: object
                            maxItems: 16
                            type: array
                          group:
                            default: ""
                            description: |-
                              Group is the group of the backend resource
                              Empty string means the core API group
                            maxLength: 253
                            type: string
                          kind:
                            default: Service
                            description: |-
                              Kind is the kind of the backend resource
                              Defaults to "Service"
                            maxLength: 63
                            minLength: 1
                            type: string
                          name:
                            description: Name is the name of the backend resource
                            maxLength: 253
                            minLength: 1
                            type: string
                          namespace:
                            description: |-
                              Namespace is the namespace of the backend resource
                              When unspecified, the local namespace is inferred
                            maxLength: 63
                            minLength: 1
                            type: string
                          port:
                            description: Port is the port of the backend service
                            format: int32
                            maximum: 65535
                            minimum: 1
                            type: integer
                          weight:
                            default: 1
                            description: |-
                              Weight specifies the proportion of traffic to forward to this backend
                              Defaults to 1
                            format: int32
                            maximum: 1000000
                            minimum: 0
                            type: integer
                        required:
                        - name
                        type: object
                      maxItems: 16
                      type: array
                    filters:
                      description: Filters define the filters that are applied to
                        requests that match this rule.
                      items:
                        description: |-
                          GRPCRouteFilter defines processing steps that must be completed during the
                          request or response lifecycle.
                        properties:
                          extensionRef:
                            description: |-
                              ExtensionRef is an optional, implementation-specific extension to the
                              "filter" behavior.
                            properties:
                              name:
                                description: Name is the name of the referent
                                maxLength: 253
                                minLength: 1
                                type: string
                            required:
                            - name
                            type: object
                          requestHeaderModifier:
                            description: RequestHeaderModifier defines a schema for
                              a filter that modifies request headers.
                            properties:
                              add:
                                description: Add adds the given header(s) (name, value)
                                  to the request/response
                                items:
                                  description: HTTPHeader represents an HTTP header
                                    name and value
                                  properties:
                                    name:
                                      description: Name is the name of the HTTP header
                                      maxLength: 256
                                      minLength: 1
                                      pattern: ^[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                                      type: string
                                    value:
                                      description: Value is the value of the HTTP
                                        header
                                      maxLength: 4096
                                      type: string
                                  required:
                                  - name
                                  - value
                                  type: object
                                maxItems: 16
                                type: array
                                x-kubernetes-list-map-keys:
                                - name
                                x-kubernetes-list-type: map
                              remove:
                                description: Remove removes the given header(s) from
                                  the request/response
                                items:
                                  type: string
                                maxItems: 16
                                type: array
                              set:
                                description: Set overwrites the request/response with
                                  the given header (name, value)
                                items:
                                  description: HTTPHeader represents an HTTP header
                                    name and value
                                  properties:
                                    name:
                                      description: Name is the name of the HTTP header
                                      maxLength: 256
                                      minLength: 1
                                      pattern: ^[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                                      type: string
                                    value:
                                      description: Value is the value of the HTTP
                                        header
                                      maxLength: 4096
                                      type: string
                                  required:
                                  - name
                                  - value
                                  type: object
                                maxItems: 16
                                type: array
                                x-kubernetes-list-map-keys:
                                - name
                                x-kubernetes-list-type: map
                            type: object
                          requestMirror:
                            description: RequestMirror defines a schema for a filter
                              that mirrors requests.
                            properties:
                              backendRef:
                                description: BackendRef references a resource where
                                  mirrored requests are sent.
                                properties:
                                  group:
                                    default: ""
                                    description: |-
                                      Group is the group of the backend resource
                                      Empty string means the core API group
                                    maxLength: 253
                                    type: string
                                  kind:
                                    default: Service
                                    description: |-
                                      Kind is the kind of the backend resource
                                      Defaults to "Service"
                                    maxLength: 63
                                    minLength: 1
                                    type: string
                                  name:
                                    description: Name is the name of the backend resource
                                    maxLength: 253
                                    minLength: 1
                                    type: string
                                  namespace:
                                    description: |-
                                      Namespace is the namespace of the backend resource
                                      When unspecified, the local namespace is inferred
                                    maxLength: 63
                                    minLength: 1
                                    type: string
                                  port:
                                    description: Port is the port of the backend service
                                    format: int32
                                    maximum: 65535
                                    minimum: 1
                                    type: integer
                                  weight:
                                    default: 1
                                    description: |-
                                      Weight specifies the proportion of traffic to forward to this backend
                                      Defaults to 1
                                    format: int32
                                    maximum: 1000000
                                    minimum: 0
                                    type: integer
                                required:
                                - name
                                type: object
                              percent:
                                default: 100
                                description: Percent of requests to mirror. Defaults
                                  to 100.
                                format: int32
                                maximum: 100
                                minimum: 0
                                type: integer
                            required:
                            - backendRef
                            type: object
                          responseHeaderModifier:
                            description: ResponseHeaderModifier defines a schema for
                              a filter that modifies response headers.
                            properties:
                              add:
                                description: Add adds the given header(s) (name, value)
                                  to the request/response
                                items:
                                  description: HTTPHeader represents an HTTP header
                                    name and value
                                  properties:
                                    name:
                                      description: Name is the name of the HTTP header
                                      maxLength: 256
                                      minLength: 1
                                      pattern: ^[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                                      type: string
                                    value:
                                      description: Value is the value of the HTTP
                                        header
                                      maxLength: 4096
                                      type: string
                                  required:
                                  - name
                                  - value
                                  type: object
                                maxItems: 16
                                type: array
                                x-kubernetes-list-map-keys:
                                - name
                                x-kubernetes-list-type: map
                              remove:
                                description: Remove removes the given header(s) from
                                  the request/response
                                items:
                                  type: string
                                maxItems: 16
                                type: array
                              set:
                                description: Set overwrites the request/response with
                                  the given header (name, value)
                                items:
                                  description: HTTPHeader represents an HTTP header
                                    name and value
                                  properties:
                                    name:
                                      description: Name is the name of the HTTP header
                                      maxLength: 256
                                      minLength: 1
                                      pattern: ^[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                                      type: string
                                    value:
                                      description: Value is the value of the HTTP
                                        header
                                      maxLength: 4096
                                      type: string
                                  required:
                                  - name
                                  - value
                                  type: object
                                maxItems: 16
                                type: array
                                x-kubernetes-list-map-keys:
                                - name
                                x-kubernetes-list-type: map
                            type: object
                          type:
                            allOf:
                            - enum:
                              - RequestHeaderModifier
                              - ResponseHeaderModifier
                              - RequestMirror
                              - ExtensionRef
                            - enum:
                              - RequestHeaderModifier
                              - ResponseHeaderModifier
                              - RequestMirror
                              - ExtensionRef
                            description: Type identifies the type of filter to apply.
                            type: string
                        required:
                        - type
                        type: object
                      maxItems: 16
                      type: array
                    matches:
                      description: |-
                        Matches define conditions used for matching the rule against incoming
                        gRPC requests. Each match is independent, i.e. this rule will be matched
                        if any one of the matches is satisfied.
                      items:
                        description: GRPCRouteMatch defines the predicate used to
                          match requests to a given action.
                        properties:
                          headers:
                            description: Headers specifies gRPC request header matchers.
                            items:
                              description: GRPCHeaderMatch describes how to select
                                a gRPC route by matching gRPC request headers.
                              properties:
                                name:
                                  description: Name is the name of the gRPC metadata
                                    header to be matched.
                                  maxLength: 256
                                  minLength: 1
                                  pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                                  type: string
                                type:
                                  allOf:
                                  - enum:
                                    - Exact
                                    - RegularExpression
                                  - enum:
                                    - Exact
                                    - RegularExpression
                                  default: Exact
                                  description: Type specifies how to match against
                                    the value of the header.
                                  type: string
                                value:
                                  description: Value is the value of gRPC metadata
                                    header to be matched.
                                  maxLength: 4096
                                  minLength: 1
                                  type: string
                              required:
                              - name
                              - value
                              type: object
                            maxItems: 16
                            type: array
                          method:
                            description: Method specifies a gRPC request service/method
                              matcher.
                            properties:
                              method:
                                description: |-
                                  Method is the name of the gRPC method to match against.
                                  If not specified, matches all methods.
                                maxLength: 1024
                                type: string
                              service:
                                description: |-
                                  Service is the name of the gRPC service to match against.
                                  If not specified, matches all services.
                                maxLength: 1024
                                type: string
                              type:
                                allOf:
                                - enum:
                                  - Exact
                                  - RegularExpression
                                - enum:
                                  - Exact
                                  - RegularExpression
                                default: Exact
                                description: Type specifies how to match against the
                                  service and/or method.
                                type: string
                            type: object
                        type: object
                      maxItems: 8
                      type: array
                    retryPolicy:
                      description: RetryPolicy defines the retry policy for this rule.
                      properties:
                        backoff:
                          description: Backoff defines the backoff strategy for retries.
                          properties:
                            baseInterval:
                              default: 100ms
                              description: BaseInterval is the base interval between
                                retries.
                              pattern: ^([0-9]+(ms|s|m))+$
                              type: string
                            maxInterval:
                              default: 10s
                              description: MaxInterval is the maximum interval between
                                retries.
                              pattern: ^([0-9]+(ms|s|m))+$
                              type: string
                          type: object
                        numRetries:
                          default: 1
                          description: NumRetries is the number of retries to attempt.
                          format: int32
                          type: integer
                        perTryTimeout:
                          description: PerTryTimeout specifies the timeout per retry
                            attempt.
                          type: string
                        retryOn:
                          description: RetryOn specifies the gRPC status codes under
                            which retry takes place.
                          items:
                            description: GRPCRetryOn defines gRPC status codes for
                              retry.
                            enum:
                            - cancelled
                            - deadline-exceeded
                            - internal
                            - resource-exhausted
                            - unavailable
                            type: string
                          maxItems: 16
                          type: array
                      type: object
                    sessionAffinity:
                      description: SessionAffinity defines session affinity configuration
                        for this rule.
                      properties:
                        absoluteTimeout:
                          description: AbsoluteTimeout defines the absolute timeout
                            of the persistent session.
                          type: string
                        cookie:
                          description: Cookie defines cookie-based session affinity
                            configuration.
                          properties:
                            name:
                              description: Name is the name of the cookie to use for
                                session affinity.
                              maxLength: 128
                              minLength: 1
                              type: string
                            path:
                              description: Path is the path of the cookie.
                              maxLength: 1024
                              type: string
                            ttl:
                              description: TTL is the time-to-live of the cookie.
                              type: string
                          required:
                          - name
                          type: object
                        header:
                          description: Header defines header-based session affinity
                            configuration.
                          properties:
                            name:
                              description: Name is the name of the header to use for
                                session affinity.
                              maxLength: 256
                              minLength: 1
                              type: string
                          required:
                          - name
                          type: object
                        idleTimeout:
                          description: IdleTimeout defines the idle timeout of the
                            persistent session.
                          type: string
                        type:
                          allOf:
                          - enum:
                            - Header
                            - Cookie
                          - enum:
                            - Header
                            - Cookie
                          description: Type defines the type of session affinity.
                          type: string
                      required:
                      - type
                      type: object
                  type: object
                maxItems: 16
                type: array
            type: object
          status:
            description: GRPCRouteStatus defines the observed state of GRPCRoute
            properties:
              parents:
                description: |-
                  Parents is a list of parent resources (usually Gateways) that are associated
                  with the route, and the status of the route with respect to each parent
                items:
                  description: RouteParentStatus describes the status of a route with
                    respect to an associated parent
                  properties:
                    conditions:
                      description: Conditions describes the status of the route with
                        respect to the Gateway
                      items:
                        description: Condition represents a condition of a resource
                        properties:
                          lastTransitionTime:
                            description: LastTransitionTime is the last time the condition
                              transitioned from one status to another
                            format: date-time
                            type: string
                          message:
                            description: Message is a human-readable message indicating
                              details about the transition
                            maxLength: 32768
                            type: string
                          observedGeneration:
                            description: ObservedGeneration represents the .metadata.generation
                              that the condition was set based upon
                            format: int64
                            minimum: 0
                            type: integer
                          reason:
                            description: Reason is a brief reason for the condition's
                              last transition
                            maxLength: 1024
                            minLength: 1
                            type: string
                          status:
                            description: Status of the condition, one of True, False,
                              Unknown
                            enum:
                            - "True"
                            - "False"
                            - Unknown
                            type: string
                          type:
                            description: Type of condition
                            type: string
                        required:
                        - lastTransitionTime
                        - reason
                        - status
                        - type
                        type: object
                      maxItems: 8
                      type: array
                      x-kubernetes-list-map-keys:
                      - type
                      x-kubernetes-list-type: map
                    controllerName:
                      description: ControllerName is the name of the controller that
                        wrote this status
                      maxLength: 253
                      minLength: 1
                      type: string
                    parentRef:
                      description: ParentRef corresponds with a ParentRef in the spec
                        that this status describes
                      properties:
                        group:
                          default: avapigw.vyrodovalexey.github.com
                          description: |-
                            Group is the group of the parent resource
                            Defaults to "avapigw.vyrodovalexey.github.com"
                          maxLength: 253
                          type: string
                        kind:
                          default: Gateway
                          description: |-
                            Kind is the kind of the parent resource
                            Defaults to "Gateway"
                          maxLength: 63
                          minLength: 1
                          type: string
                        name:
                          description: Name is the name of the parent resource
                          maxLength: 253
                          minLength: 1
                          type: string
                        namespace:
                          description: |-
                            Namespace is the namespace of the parent resource
                            When unspecified, the local namespace is inferred
                          maxLength: 63
                          minLength: 1
                          type: string
                        port:
                          description: Port is the network port this Route targets
                          format: int32
                          maximum: 65535
                          minimum: 1
                          type: integer
                        sectionName:
                          description: |-
                            SectionName is the name of a section within the parent resource
                            This is typically the listener name for Gateway
                          maxLength: 253
                          minLength: 1
                          type: string
                      required:
                      - name
                      type: object
                  required:
                  - controllerName
                  - parentRef
                  type: object
                maxItems: 32
                type: array
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
