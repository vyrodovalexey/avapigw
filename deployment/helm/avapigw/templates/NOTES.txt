Thank you for installing {{ .Chart.Name }}!

Your release is named: {{ .Release.Name }}
Namespace: {{ include "avapigw.namespace" . }}

{{- if .Values.operator.enabled }}

== Operator ==
The Gateway Operator has been deployed successfully.

To check the operator status:
  kubectl get pods -n {{ include "avapigw.namespace" . }} -l app.kubernetes.io/component=operator

To view operator logs:
  kubectl logs -n {{ include "avapigw.namespace" . }} -l app.kubernetes.io/component=operator -f
{{- end }}

{{- if .Values.gateway.enabled }}

== Gateway ==
The API Gateway has been deployed successfully.

To check the gateway status:
  kubectl get pods -n {{ include "avapigw.namespace" . }} -l app.kubernetes.io/component=gateway

To view gateway logs:
  kubectl logs -n {{ include "avapigw.namespace" . }} -l app.kubernetes.io/component=gateway -f

Gateway Service:
  kubectl get svc {{ include "avapigw.gateway.serviceName" . }} -n {{ include "avapigw.namespace" . }}

{{- if .Values.gateway.service.type | eq "LoadBalancer" }}
To get the external IP:
  kubectl get svc {{ include "avapigw.gateway.serviceName" . }} -n {{ include "avapigw.namespace" . }} -o jsonpath='{.status.loadBalancer.ingress[0].ip}'
{{- end }}
{{- end }}

{{- if .Values.crds.install }}

== CRDs ==
The following Custom Resource Definitions have been installed:
  - gateways.avapigw.vyrodovalexey.github.com
  - httproutes.avapigw.vyrodovalexey.github.com
  - grpcroutes.avapigw.vyrodovalexey.github.com
  - tcproutes.avapigw.vyrodovalexey.github.com
  - tlsroutes.avapigw.vyrodovalexey.github.com
  - backends.avapigw.vyrodovalexey.github.com
  - authpolicies.avapigw.vyrodovalexey.github.com
  - ratelimitpolicies.avapigw.vyrodovalexey.github.com
  - tlsconfigs.avapigw.vyrodovalexey.github.com
  - vaultsecrets.avapigw.vyrodovalexey.github.com

To list all CRDs:
  kubectl get crds | grep avapigw
{{- end }}

{{- if .Values.webhook.enabled }}

== Webhooks ==
Admission webhooks are enabled for resource validation and mutation.
{{- if .Values.webhook.selfSignedCert }}
Self-signed certificates are being used for webhook TLS.
{{- end }}
{{- end }}

{{- if .Values.vault.enabled }}

== Vault Integration ==
Vault integration is enabled.
Address: {{ .Values.vault.address }}
Auth Path: {{ .Values.vault.authPath }}
Role: {{ .Values.vault.role }}
{{- end }}

== Quick Start ==

1. Create a Gateway resource:
   kubectl apply -f - <<EOF
   apiVersion: avapigw.vyrodovalexey.github.com/v1alpha1
   kind: Gateway
   metadata:
     name: my-gateway
     namespace: {{ include "avapigw.namespace" . }}
   spec:
     listeners:
       - name: http
         port: 8080
         protocol: HTTP
   EOF

2. Create an HTTPRoute:
   kubectl apply -f - <<EOF
   apiVersion: avapigw.vyrodovalexey.github.com/v1alpha1
   kind: HTTPRoute
   metadata:
     name: my-route
     namespace: {{ include "avapigw.namespace" . }}
   spec:
     parentRefs:
       - name: my-gateway
     hostnames:
       - "example.com"
     rules:
       - matches:
           - path:
               type: PathPrefix
               value: /
         backendRefs:
           - name: my-backend
             port: 80
   EOF

For more information, visit: https://github.com/vyrodovalexey/avapigw
